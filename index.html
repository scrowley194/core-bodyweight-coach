<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Simple Core Randomiser</title>
<style>
  :root{
    --bg:#0f1115; --card:#161a22; --ink:#e9ecf1; --muted:#9aa3b2;
    --brand:#6ee7b7; --accent:#60a5fa; --danger:#f87171;
    --radius:14px; --shadow:0 10px 30px rgba(0,0,0,.35);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--ink);
       font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial}
  .wrap{max-width:760px;margin:0 auto;padding:20px}
  h1{font-size:1.4rem;margin:0 0 10px}
  .card{background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
        border:1px solid rgba(255,255,255,.10);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px}
  .row{display:flex;gap:10px;flex-wrap:wrap}
  .btn{
    appearance:none;-webkit-appearance:none;cursor:pointer;border-radius:12px;
    border:1px solid rgba(255,255,255,.14);padding:12px 16px;font-weight:700;color:var(--ink);
    background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    transition:transform .15s ease, opacity .15s ease;
    user-select:none;-webkit-tap-highlight-color:transparent
  }
  .btn:active{transform:translateY(1px)}
  .btn.primary{background:linear-gradient(135deg,var(--accent),var(--brand));color:#0b1020;border-color:transparent}
  .btn.ghost{background:transparent;border:1px dashed rgba(255,255,255,.25);color:var(--muted)}
  .title{font-size:1.35rem;margin:2px 0 8px}
  .muted{color:var(--muted)}
  .stack{display:grid;gap:10px}
  .chip{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.15);background:rgba(255,255,255,.04);font-weight:600;cursor:pointer}
  .chip.active{border-color:var(--accent);background:rgba(96,165,250,.12)}
  .desc{line-height:1.45;margin:6px 0 0}
  .box{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.10);border-radius:12px;padding:12px}
  .timer{
    display:grid;gap:10px;justify-items:center;text-align:center
  }
  .time{font-size:2.8rem;font-weight:900;letter-spacing:.5px}
  .progress{width:100%;height:10px;border-radius:999px;background:rgba(255,255,255,.06);overflow:hidden;border:1px solid rgba(255,255,255,.12)}
  .bar{height:100%;width:0%;background:linear-gradient(90deg,var(--brand),var(--accent));transition:width .2s linear}
  footer{margin:18px 0;color:var(--muted);font-size:.9rem;text-align:center}
</style>
</head>
<body>
<div class="wrap">
  <header class="card" style="display:flex;align-items:center;justify-content:space-between;gap:10px">
    <div>
      <h1>Simple Core Randomiser</h1>
      <p class="muted" style="margin:0">Tap once to get a bodyweight move for strong, toned abs. No kit. No accounts.</p>
    </div>
    <button id="roll" class="btn primary">Give me an exercise</button>
  </header>

  <main class="stack" style="margin-top:12px">
    <section id="result" class="card" aria-live="polite">
      <p class="muted" style="margin:0">Tap the button above to start.</p>
    </section>

    <section id="timerCard" class="card" hidden>
      <div class="timer">
        <div class="time" id="time">00:30</div>
        <div class="progress"><div class="bar" id="bar"></div></div>
        <div class="row" style="justify-content:center">
          <button class="btn" id="minus10">−10s</button>
          <button class="btn primary" id="start">Start</button>
          <button class="btn" id="pause">Pause</button>
          <button class="btn" id="plus10">+10s</button>
          <button class="btn ghost" id="reset">Reset</button>
        </div>
        <p class="muted" id="tip" style="margin:6px 0 0">Tip: breathe through the nose, keep ribs down.</p>
      </div>
    </section>
  </main>

  <footer>Everything runs in your browser and stays on your device.</footer>
</div>

<script>
  // Shortcuts
  const $ = s => document.querySelector(s);

  // Simple audio beep at the end
  let audioCtx=null;
  function initAudio(){ if(!audioCtx){ try{ audioCtx = new (window.AudioContext||window.webkitAudioContext)(); }catch{} } }
  function beep(){
    if(!audioCtx) return;
    const o = audioCtx.createOscillator(); const g = audioCtx.createGain();
    o.type = "sine"; o.frequency.value = 880;
    g.gain.value = 0.0001;
    o.connect(g).connect(audioCtx.destination);
    o.start();
    g.gain.exponentialRampToValueAtTime(0.25, audioCtx.currentTime + 0.02);
    g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.18);
    o.stop(audioCtx.currentTime + 0.2);
  }

  // Exercise library
  // Each item: name, how, levels [easy, standard, spicy], baseSec (easy), tags
  const MOVES = [
    {name:"Dead bug",
     how:"Lie on your back, arms up, hips and knees at 90. Press your lower back into the floor. Exhale as you reach opposite arm and leg, then return and switch sides.",
     levels:[
       {label:"Easy", mod:"Toe taps only", sec:25},
       {label:"Standard", mod:"Opposite arm and leg", sec:35},
       {label:"Spicy", mod:"Add 2 second pauses at full reach", sec:45}
     ]},
    {name:"Hollow hold",
     how:"Tuck ribs down and curl shoulders just off the floor. Extend legs and arms only as far as you can keep your lower back pressed down.",
     levels:[
       {label:"Easy", mod:"Tuck position", sec:20},
       {label:"Standard", mod:"One leg long", sec:30},
       {label:"Spicy", mod:"Full hollow, arms overhead", sec:40}
     ]},
    {name:"Plank",
     how:"Elbows under shoulders, body in a straight line from head to heels. Squeeze glutes and keep ribs down. Do not let hips sag.",
     levels:[
       {label:"Easy", mod:"Knees down", sec:25},
       {label:"Standard", mod:"High or low plank", sec:40},
       {label:"Spicy", mod:"Narrow feet or weight shift", sec:50}
     ]},
    {name:"Side plank",
     how:"Elbow under shoulder, feet stacked. Lift hips and keep a straight line. Push top hip forward.",
     levels:[
       {label:"Easy", mod:"Knees bent", sec:20},
       {label:"Standard", mod:"Feet stacked", sec:30},
       {label:"Spicy", mod:"Star position or hip dips", sec:40}
     ]},
    {name:"Reverse crunch",
     how:"On your back with knees bent. Curl the pelvis to bring knees towards chest. Lower with control. Do not swing the legs.",
     levels:[
       {label:"Easy", mod:"Small range", sec:25},
       {label:"Standard", mod:"Full range", sec:35},
       {label:"Spicy", mod:"Straight legs or 2 second pause at top", sec:45}
     ]},
    {name:"Bicycle crunch",
     how:"Hands light behind head. Lift shoulders and cycle legs. Twist ribs towards opposite knee. Slow and controlled.",
     levels:[
       {label:"Easy", mod:"Small range", sec:25},
       {label:"Standard", mod:"Full range", sec:35},
       {label:"Spicy", mod:"Slow tempo, 3 second holds", sec:45}
     ]},
    {name:"Mountain climbers",
     how:"High plank. Drive one knee towards chest then switch at a steady pace. Keep hips level.",
     levels:[
       {label:"Easy", mod:"Slow pace", sec:25},
       {label:"Standard", mod:"Steady pace", sec:35},
       {label:"Spicy", mod:"Cross body to opposite elbow", sec:45}
     ]},
    {name:"Bird dog",
     how:"On hands and knees. Reach opposite arm and leg long. Pause to stop wobble then switch.",
     levels:[
       {label:"Easy", mod:"Small reach", sec:25},
       {label:"Standard", mod:"Full reach with 1 second pause", sec:35},
       {label:"Spicy", mod:"5 second pause or draw a box", sec:45}
     ]},
    {name:"Glute bridge",
     how:"Feet hip width. Tilt pelvis then lift hips, ribs down. Squeeze at the top and lower with control.",
     levels:[
       {label:"Easy", mod:"Double leg", sec:30},
       {label:"Standard", mod:"Marching at top", sec:40},
       {label:"Spicy", mod:"Single leg", sec:50}
     ]},
    {name:"Leg lowers",
     how:"Lie on back, legs up. Press lower back down. Lower both legs slowly without losing contact, then raise.",
     levels:[
       {label:"Easy", mod:"Bend knees a little", sec:20},
       {label:"Standard", mod:"Straight legs to 45 degrees", sec:30},
       {label:"Spicy", mod:"Lower close to floor then pause", sec:40}
     ]},
    {name:"Flutter kicks",
     how:"Lie back, legs long. Lower back pressed down. Alternate small quick kicks just above the floor.",
     levels:[
       {label:"Easy", mod:"Hands under hips", sec:25},
       {label:"Standard", mod:"Arms by sides", sec:35},
       {label:"Spicy", mod:"Arms overhead", sec:45}
     ]},
    {name:"Toe reaches",
     how:"Legs up straight. Reach hands towards toes by curling ribs down and lifting shoulders. Lower with control.",
     levels:[
       {label:"Easy", mod:"Small reach", sec:20},
       {label:"Standard", mod:"Full reach", sec:30},
       {label:"Spicy", mod:"Slow tempo with holds", sec:40}
     ]},
    {name:"Plank shoulder taps",
     how:"High plank, feet a bit wider. Tap opposite shoulder without letting hips rock.",
     levels:[
       {label:"Easy", mod:"Hands on a box or sofa", sec:25},
       {label:"Standard", mod:"Floor taps", sec:35},
       {label:"Spicy", mod:"Feet close together", sec:45}
     ]},
    {name:"Plank knee to elbow",
     how:"From plank, bring knee towards elbow with a small crunch. Swap sides.",
     levels:[
       {label:"Easy", mod:"Slow range", sec:25},
       {label:"Standard", mod:"Steady pace", sec:35},
       {label:"Spicy", mod:"Hold the squeeze for 1 to 2 seconds", sec:45}
     ]},
    {name:"Bear crawl hold",
     how:"On hands and knees, lift knees 2 to 3 cm off the floor. Keep back flat and breathe.",
     levels:[
       {label:"Easy", mod:"Static hold", sec:20},
       {label:"Standard", mod:"Slow shoulder taps", sec:30},
       {label:"Spicy", mod:"Opposite hand and foot steps", sec:40}
     ]},
    {name:"V-sit hold",
     how:"Balance on sit bones. Lift chest, ribs down, shins parallel. Hold and breathe.",
     levels:[
       {label:"Easy", mod:"Hands on thighs", sec:20},
       {label:"Standard", mod:"Arms forward", sec:30},
       {label:"Spicy", mod:"Legs straighter and lower", sec:40}
     ]},
    {name:"Russian twists",
     how:"Sit tall, lean back a touch, lift feet if able. Rotate ribs side to side. Keep the move smooth.",
     levels:[
       {label:"Easy", mod:"Feet down", sec:25},
       {label:"Standard", mod:"Feet up", sec:35},
       {label:"Spicy", mod:"Slow tempo with pauses", sec:45}
     ]},
    {name:"Seated knee tucks",
     how:"Sit on hands, chest tall. Extend legs away then tuck knees back in without rounding the back.",
     levels:[
       {label:"Easy", mod:"Small range", sec:25},
       {label:"Standard", mod:"Full range", sec:35},
       {label:"Spicy", mod:"Hold straight legs for 1 second each rep", sec:45}
     ]},
    {name:"Jackknife",
     how:"Lie back, arms overhead. Lift legs and reach hands to meet them, then lower with control.",
     levels:[
       {label:"Easy", mod:"Bent knees", sec:20},
       {label:"Standard", mod:"Straight legs", sec:30},
       {label:"Spicy", mod:"Slow eccentric lower", sec:40}
     ]},
    {name:"Plank saw",
     how:"Low plank. Rock body forward and back from shoulders while keeping ribs down.",
     levels:[
       {label:"Easy", mod:"Small rocks", sec:25},
       {label:"Standard", mod:"Bigger range", sec:35},
       {label:"Spicy", mod:"Feet together, long rocks", sec:45}
     ]},
    {name:"Side plank hip dips",
     how:"From side plank, lower hips a few cm then lift to straight line. Smooth and controlled.",
     levels:[
       {label:"Easy", mod:"Knees down", sec:20},
       {label:"Standard", mod:"Feet stacked", sec:30},
       {label:"Spicy", mod:"Top leg raised", sec:40}
     ]},
    {name:"Hollow rocks",
     how:"Hold a tight hollow shape and rock gently without losing position.",
     levels:[
       {label:"Easy", mod:"Tuck rocks", sec:20},
       {label:"Standard", mod:"One leg long", sec:30},
       {label:"Spicy", mod:"Full hollow rocks", sec:40}
     ]},
    {name:"Superman hold",
     how:"Lie face down. Lift arms and legs slightly, squeeze glutes, keep gaze down to keep neck neutral.",
     levels:[
       {label:"Easy", mod:"Arms by sides", sec:20},
       {label:"Standard", mod:"Arms overhead", sec:30},
       {label:"Spicy", mod:"Swimmer kicks", sec:40}
     ]},
    {name:"Walkout to plank",
     how:"From standing, fold, walk hands to plank, hold a moment, then walk back and stand tall.",
     levels:[
       {label:"Easy", mod:"Short walkout", sec:25},
       {label:"Standard", mod:"Full walkout", sec:35},
       {label:"Spicy", mod:"Add a press-up in plank", sec:45}
     ]},
    {name:"Inchworm",
     how:"From standing, walk hands to plank, add a small push-up if able, then walk feet in small steps to your hands.",
     levels:[
       {label:"Easy", mod:"No push-up", sec:25},
       {label:"Standard", mod:"With push-up", sec:35},
       {label:"Spicy", mod:"With shoulder tap at plank", sec:45}
     ]},
    {name:"Standing knee to elbow",
     how:"Hands by head, bring knee to opposite elbow with a small crunch. Swap sides.",
     levels:[
       {label:"Easy", mod:"Slow pace", sec:25},
       {label:"Standard", mod:"Steady pace", sec:35},
       {label:"Spicy", mod:"Hold the squeeze for 1 second", sec:45}
     ]},
    {name:"High plank to low plank",
     how:"From high plank, lower to elbows one at a time, then return to hands. Keep hips steady.",
     levels:[
       {label:"Easy", mod:"Knees down", sec:25},
       {label:"Standard", mod:"Full plank", sec:35},
       {label:"Spicy", mod:"Feet close together", sec:45}
     ]},
    {name:"Plank lean",
     how:"High plank. Shift body weight forward over wrists a few centimetres, then return. Stay tight through ribs.",
     levels:[
       {label:"Easy", mod:"Small lean", sec:20},
       {label:"Standard", mod:"Moderate lean", sec:30},
       {label:"Spicy", mod:"Deep lean, slow", sec:40}
     ]},
    {name:"Hip raise march",
     how:"Glute bridge position. Hold the top and slowly lift one knee at a time without hips dropping.",
     levels:[
       {label:"Easy", mod:"Short hold", sec:25},
       {label:"Standard", mod:"Alternating march", sec:35},
       {label:"Spicy", mod:"Arms overhead", sec:45}
     ]},
    {name:"Toe taps",
     how:"Tabletop position. Tap one foot to the floor and return without losing lower back contact, then switch.",
     levels:[
       {label:"Easy", mod:"Slow taps", sec:25},
       {label:"Standard", mod:"Steady taps", sec:35},
       {label:"Spicy", mod:"Add arm reaches", sec:45}
     ]}
  ];

  // State for current move and difficulty
  let current = null;
  let currentLevelIndex = 1; // 0 easy, 1 standard, 2 spicy

  // Timer state
  let totalMs = 30000;
  let leftMs = totalMs;
  let ticker = null;

  function pickRandom(){
    initAudio();
    current = MOVES[Math.floor(Math.random()*MOVES.length)];
    currentLevelIndex = 1; // default to Standard
    renderMove();
    setTimer(current.levels[currentLevelIndex].sec);
    $('#timerCard').hidden = false;
    window.scrollTo({top: document.body.scrollTop + 1, behavior:'smooth'});
  }

  function renderMove(){
    const m = current;
    const sec = m.levels[currentLevelIndex].sec;
    const html = `
      <div class="row" style="justify-content:space-between;align-items:center">
        <div>
          <div class="title">${m.name}</div>
          <p class="desc">${m.how}</p>
        </div>
        <button class="btn ghost" id="next">New exercise</button>
      </div>
      <div class="box" style="margin-top:10px">
        <div class="row" role="tablist" aria-label="Difficulty">
          ${m.levels.map((lv, i)=>`
            <button class="chip ${i===currentLevelIndex?'active':''}" data-level="${i}" aria-pressed="${i===currentLevelIndex}">
              ${lv.label} • <span class="muted">${lv.mod}</span>
            </button>
          `).join('')}
        </div>
        <p class="muted" style="margin:8px 0 0">Recommended time for this level: <strong>${sec}s</strong></p>
      </div>
    `;
    $('#result').innerHTML = html;

    // Wire up buttons
    $('#next').onclick = ()=> { stopTimer(); pickRandom(); };
    document.querySelectorAll('[data-level]').forEach(btn=>{
      btn.onclick = ()=>{
        document.querySelectorAll('[data-level]').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        currentLevelIndex = Number(btn.getAttribute('data-level'));
        setTimer(current.levels[currentLevelIndex].sec);
      };
    });
  }

  // Timer helpers
  function setTimer(seconds){
    totalMs = Math.max(10, Number(seconds)) * 1000;
    leftMs = totalMs;
    updateTime();
    updateBar();
  }
  function startTimer(){
    initAudio();
    if(ticker) return;
    const start = performance.now();
    let last = start;
    ticker = setInterval(()=> {
      const now = performance.now();
      const dt = now - last; last = now;
      leftMs -= dt;
      if(leftMs <= 0){
        leftMs = 0; updateTime(); updateBar();
        stopTimer(); beep();
      }else{
        updateTime(); updateBar();
      }
    }, 100);
  }
  function stopTimer(){ if(ticker){ clearInterval(ticker); ticker = null; } }
  function resetTimer(){ stopTimer(); leftMs = totalMs; updateTime(); updateBar(); }
  function plus(sec){ totalMs += sec*1000; leftMs += sec*1000; updateTime(); updateBar(); }
  function minus(sec){
    totalMs = Math.max(5000, totalMs - sec*1000);
    leftMs = Math.min(leftMs, totalMs);
    updateTime(); updateBar();
  }
  function updateTime(){
    const s = Math.ceil(leftMs/1000);
    const mm = String(Math.floor(s/60)).padStart(2,'0');
    const ss = String(s%60).padStart(2,'0');
    $('#time').textContent = `${mm}:${ss}`;
  }
  function updateBar(){
    const p = totalMs === 0 ? 0 : 1 - (leftMs/totalMs);
    $('#bar').style.width = `${Math.max(0, Math.min(1, p))*100}%`;
  }

  // Controls
  $('#roll').addEventListener('click', pickRandom, {passive:true});
  $('#start').addEventListener('click', startTimer, {passive:true});
  $('#pause').addEventListener('click', stopTimer, {passive:true});
  $('#reset').addEventListener('click', resetTimer, {passive:true});
  $('#plus10').addEventListener('click', ()=> plus(10), {passive:true});
  $('#minus10').addEventListener('click', ()=> minus(10), {passive:true});
</script>
</body>
</html>
